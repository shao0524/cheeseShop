(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6cf3780"],{"1e65":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"text-right my-3"},[a("button",{staticClass:"btb btn-primary px-3 py-1",on:{click:function(e){return t.openModal(!0)}}},[t._v(" 建立新商品 ")])]),a("table",{staticClass:"table table-hover table-striped table-dark table-overflow"},[t._m(0),a("tbody",t._l(t.productList,(function(e){return a("tr",{key:e.id,staticClass:"text-center"},[a("td",{attrs:{width:"250"}},[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.category))]),a("td",{attrs:{width:"80"}},[t._v(t._s(e.stock))]),a("td",{staticClass:"text-right",attrs:{width:"120"}},[t._v(" "+t._s(t._f("currency")(e.origin_price))+" ")]),a("td",{staticClass:"text-right",attrs:{width:"120"}},[t._v(t._s(t._f("currency")(e.price)))]),a("td",{attrs:{width:"80"}},[e.is_enabled?a("span",{staticClass:"text-success"},[t._v("啟用中")]):a("span",{staticClass:"text-danger"},[t._v("未啟用")])]),a("td",{attrs:{width:"120"}},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openModal(!1,e,"edit")}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openModal(!1,e,"remove")}}},[t._v(" 刪除 ")])])])])})),0),a("tbody")]),a("div",{staticClass:"my-3"},[a("Pagination",{attrs:{pagination:t.pagination},on:{changePage:t.changePage}})],1),a("div",{staticClass:"modal fade",attrs:{id:"editModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header bg-primary text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.modalTitle)+" ")]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateData.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"my-1",attrs:{for:"url"}},[t._v("請輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",name:"url",id:"url"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group my-1"},[a("label",{staticClass:"my-1",attrs:{for:"exampleFormControlFile1"}},[t._v("或上傳圖片")]),a("input",{ref:"files",staticClass:"form-control-file w-75",attrs:{type:"file",id:"exampleFormControlFile1"},on:{change:t.uploadFile}})]),a("div",[a("img",{staticClass:"w-100",attrs:{src:t.tempProduct.imageUrl}})])]),a("div",{staticClass:"col-6"},[a("ValidationProvider",{staticClass:"form-group my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"mb-1",attrs:{for:"title"}},[t._v("商品名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{type:"text",name:"商品名稱",id:"title"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}}),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"titleEng"}},[t._v("商品名稱(英文)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.titleEng,expression:"tempProduct.titleEng"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{type:"text",name:"商品名稱",id:"titleEng"},domProps:{value:t.tempProduct.titleEng},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"titleEng",e.target.value)}}}),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"category"}},[t._v("種類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{name:"種類",id:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempProduct,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("請選擇種類")]),a("option",{attrs:{value:"軟質起司"}},[t._v("軟質起司")]),a("option",{attrs:{value:"半硬質起司"}},[t._v("半硬質起司")]),a("option",{attrs:{value:"硬質起司"}},[t._v("硬質起司")]),a("option",{attrs:{value:"藍紋起司"}},[t._v("藍紋起司")]),a("option",{attrs:{value:"紡絲起司"}},[t._v("紡絲起司")]),a("option",{attrs:{value:"甜點常用起司"}},[t._v("甜點常用起司")]),a("option",{attrs:{value:"起司絲"}},[t._v("起司絲")]),a("option",{attrs:{value:"起司片"}},[t._v("起司片")])]),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"place"}},[t._v("產地")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.place,expression:"tempProduct.place"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{name:"產地",id:"place"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempProduct,"place",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇產地")]),a("option",{attrs:{value:"美國"}},[t._v("美洲")]),a("option",{attrs:{value:"歐洲"}},[t._v("歐洲")]),a("option",{attrs:{value:"澳洲"}},[t._v("澳洲")]),a("option",{attrs:{value:"日本"}},[t._v("日本")])]),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"material"}},[t._v("成分")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.material,expression:"tempProduct.material"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{name:"成分 ",id:"material"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempProduct,"material",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇主原料")]),a("option",{attrs:{value:"牛奶"}},[t._v("牛奶")]),a("option",{attrs:{value:"羊奶"}},[t._v("羊奶")])]),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("div",{staticClass:"form-row"},[a("ValidationProvider",{staticClass:"col-12 col-md-12 col-lg-6 my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control number",class:{"is-invalid":s},attrs:{type:"number",name:"原價",id:"origin_price"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}}),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("div",{staticClass:"col-12 col-md-12 col-lg-6 my-1"},[a("label",{staticClass:"my-1",attrs:{for:"price"}},[t._v("特價(沒有則不填寫)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control number",attrs:{type:"number",name:"特價",id:"price"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])],1),a("div",{staticClass:"form-row"},[a("ValidationProvider",{staticClass:"col-12 col-md-12 col-lg-6 my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"stock"}},[t._v("庫存")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.stock,expression:"tempProduct.stock"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{type:"number",name:"庫存",id:"stock"},domProps:{value:t.tempProduct.stock},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"stock",e.target.value)}}}),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}),a("ValidationProvider",{staticClass:"col-12 col-md-12 col-lg-6 my-1",attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,i=e.errors;return[a("label",{staticClass:"my-1",attrs:{for:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",class:{"is-invalid":s},attrs:{type:"text",name:"單位",id:"unit",placeholder:"如：件、包"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}}),s?a("span",{staticClass:"text-danger d-block my-1"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-check my-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled"},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t.tempProduct.is_enabled},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);s.checked?o<0&&t.$set(t.tempProduct,"is_enabled",a.concat([r])):o>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),a("label",{staticClass:"form-check-label my-1",attrs:{for:"is_enabled"}},[t._v("啟用")])])],1)]),a("div",{staticClass:"container-fluid mb-3"},[a("div",{staticClass:"from-group"},[a("label",{staticClass:"my-1",attrs:{for:"content"}},[t._v("產品敘述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{name:"content",id:"content",cols:"30",rows:"5"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-row justify-content-end"},[a("div",{staticClass:"col-6 text-center"},[a("button",{staticClass:"btn btn-outline-secondary form-control w-50",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 關閉 ")])]),a("div",{staticClass:"col-6 text-center"},[a("button",{staticClass:"btn btn-primary form-control w-50",attrs:{type:"submit",disabled:s}},[t._v(" 儲存 ")])])])])]}}])})],1)])])]),a("div",{staticClass:"modal fade",attrs:{id:"removeModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.modalTitle)+" ")]),t._m(2)]),a("div",{staticClass:"modal-body"},[a("h6",[t._v(" 商品編號： "+t._s(t.tempProduct.id)+" "),a("br"),t._v(" 商品名稱："+t._s(t.tempProduct.title)+" "),a("br"),t._v(" 分類："+t._s(t.tempProduct.category)+" "),a("br"),t._v(" 庫存："+t._s(t.tempProduct.stock)+" "),a("br"),t._v(" 原價："+t._s(t._f("currency")(t.tempProduct.origin_price))+" "),a("br"),t._v(" 特價："+t._s(t._f("currency")(t.tempProduct.price))+" ")]),a("hr"),a("div",{staticClass:"row"},[t._m(3),a("div",{staticClass:"col-6 text-center"},[a("button",{staticClass:"btn btn-danger w-50",attrs:{type:"button"},on:{click:function(e){return t.removeItem(t.tempProduct)}}},[t._v(" 儲存 ")])])])])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"bg-primary"},[a("tr",{staticClass:"text-center"},[a("th",{attrs:{width:"250"}},[t._v("產品編號")]),a("th",[t._v("產品名稱")]),a("th",[t._v("分類")]),a("th",{attrs:{width:"80"}},[t._v("庫存")]),a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("原價")]),a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("特價")]),a("th",{attrs:{width:"80"}},[t._v("狀態")]),a("th",{attrs:{width:"120"}},[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 text-center"},[a("button",{staticClass:"btn btn-outline-secondary w-50",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")])])}],r=(a("99af"),a("1157")),o=a.n(r),n=a("d529"),l={name:"AdminCatelogue",components:{Pagination:n["a"]},data:function(){return{isNew:"",tempProduct:{},modalTitle:"",productList:[],pagination:{}}},methods:{openModal:function(t,e,a){var s=this;t?(s.isNew=t,s.tempProduct={},s.modalTitle="建立新商品",o()("#editModal").modal("show")):"edit"==a?(s.isNew=t,s.tempProduct=Object.assign({},e),s.modalTitle="編輯： ".concat(s.tempProduct.title),o()("#editModal").modal("show")):(s.isNew=t,s.tempProduct=Object.assign({},e),s.modalTitle="刪除：".concat(s.tempProduct.title),o()("#removeModal").modal("show"))},uploadFile:function(){var t=this,e=this.$refs.files.files[0],a=new FormData;a.append("file-to-upload",e);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheeseny","/admin/upload");t.$bus.$emit("isLoading",!0),this.$http.post(s,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data.success&&t.$set(t.tempProduct,"imageUrl",e.data.imageUrl),t.$bus.$emit("isLoading",!1)})).catch((function(e){t.$bus.$emit("isLoading",!1),t.$bus.$emit("Alert:error",e)}))},updateData:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheeseny","/admin/product"),a="post";t.isNew||(e="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheeseny","/admin/product/").concat(t.tempProduct.id),a="put"),t.tempProduct.price||(t.tempProduct.price=t.tempProduct.origin_price),this.$http[a](e,{data:t.tempProduct}).then((function(e){e.data.success&&(t.getProductList(),o()("#editModal").modal("hide"),t.$bus.$emit("Alert:success",e.data.message))})).catch((function(e){t.$bus.$emit("Alert:error",e)}))},getProductList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheeseny","/admin/products?page=").concat(t);e.$bus.$emit("isLoading",!0),this.$http.get(a).then((function(t){t.data.success&&(e.productList=t.data.products,e.pagination=t.data.pagination),e.$bus.$emit("isLoading",!1)})).catch((function(t){e.$bus.$emit("isLoading",!1),e.$bus.$emit("Alert:error",t)}))},removeItem:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("cheeseny","/admin/product/").concat(t.id);e.$bus.$emit("isLoading",!0),this.$http.delete(a).then((function(t){t.data.success&&(e.getProductList(),o()("#removeModal").modal("hide"),e.$bus.$emit("Alert:success",t.data.message)),e.$bus.$emit("isLoading",!1)})).catch((function(t){e.$bus.$emit("Alert:error",t)}))},changePage:function(t){var e=this;e.getProductList(t)}},created:function(){this.getProductList()}},c=l,d=a("2877"),u=Object(d["a"])(c,s,i,!1,null,null,null);e["default"]=u.exports},"99af":function(t,e,a){"use strict";var s=a("23e7"),i=a("d039"),r=a("e8b5"),o=a("861d"),n=a("7b0b"),l=a("07fa"),c=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),p=a("2d00"),v=m("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",_=p>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=u("concat"),h=function(t){if(!o(t))return!1;var e=t[v];return void 0!==e?!!e:r(t)},C=!_||!b;s({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,s,i,r,o=n(this),u=d(o,0),m=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?o:arguments[e],h(r)){if(i=l(r),m+i>f)throw TypeError(g);for(a=0;a<i;a++,m++)a in r&&c(u,m,r[a])}else{if(m>=f)throw TypeError(g);c(u,m++,r)}return u.length=m,u}})},d529:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){e.preventDefault(),t.changePage(parseInt(t.pagination.current_page)-1)}}},[a("i",{staticClass:"fas fa-arrow-alt-circle-left"})])]),t._l(t.pagination.total_pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:e==t.pagination.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.changePage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){e.preventDefault(),t.changePage(parseInt(t.pagination.current_page)+1)}}},[a("i",{staticClass:"fas fa-arrow-alt-circle-right"})])])],2)])])},i=[],r={props:["pagination"],methods:{changePage:function(t){var e=this;console.log(t),e.$emit("changePage",t)}}},o=r,n=a("2877"),l=Object(n["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-a6cf3780.80cd7fcf.js.map